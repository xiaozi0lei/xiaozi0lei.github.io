---
layout: post
title:  "项目锻炼2"
date:   2017-03-08 16:47:57 +0800
categories: project
---

## 研究成果报告

### 项目名称
百度游戏自动化测试平台
### 摘要
基于主流的自动化测试框架和持续集成平台，依据公司自身项目的特点，进行二次开发整合及创新，创造出适合于公司项目的自动化测试平台。
针对公司内部不同项目的独特特点，有针对性的个性化各个项目自动化测试的实现，通过统一个入口和友好的GUI界面保证良好的易用性。已实现的自动化测试平台目前可以覆盖公司所有主要项目的接口测试和UI自动化测试。
### 研究动机与背景	
随着业务飞速发展，项目不断扩大，人工测试投入越来越大，测试效率下降明显。部分项目的复杂程度急剧上升，测试难度加大，测试人员投入加大，效果不明显。亟待需要引入新的测试方法来解决出现的问题。
公司内部的项目很多都是后端处理系统，此类系统会提供大量的接口供Web和客户端使用。接口之间的调用、依赖存在复杂的关系，如果测试遗漏，覆盖不全面，很有可能出现业务逻辑错误的地方。另外公司项目涉及到交易和支付，直接关系到用户的金钱交易，需要进行安全方面的加固，使用了大量不同的加密方式，算法和签名。这些安全特性同时也加大了测试的复杂度和难度。很多系统涉及到分布式，多数据库查询，缓存，队列等等复杂的中间件和技术，使测试门槛提高，都会提升测试的难度及人工测试的复杂度。这些接口和业务逻辑在每一次的迭代过程中都是需要完全覆盖到，从而才能保证产品的质量，这样庞大的测试用例执行是非常耗时的，所以需要引入自动化测试来实现这种大量的重复劳动。
首先研究和借鉴国外优秀公司的最佳实践和有效经验。国外互联网企业非常看重自动化测试带来的效益，Google、微软、FaceBook等互联网巨头在软件开发的不同阶段都投入人力进行自动化测试的探索，研究和开发工作，保证软件后期的测试效率。Google有专门的基础设施生产力部门，微软投入大量人力研发自动化测试工具供自己产品使用，FaceBook所有的研发人员都要负担起自己工作的自动化测试。这些优秀的国外企业通过实践总结出宝贵的经验可以让我们借鉴和使用。
作为互联网行业的翘楚，Google 公司不但实现了传统的自动化测试流程。而且，谷歌已经将提交BUG的过程和一些手动测试的日常工作也自动化了，例如，如果一个自动化测试运行失败，系统会自动检测到最后一次代码变更的信息，一般来说这是引起测试失败的原因，系统会给这次代码提交的作者发送一封通知邮件同时自动创建一个BUG来记录这个问题。在测试上，“人类智慧的最后一英寸”体现在测试设计上，谷歌的下一代测试工具也正在这个方向上努力尝试，将其自动化。
在开源思想大行的当下，整个互联网行业都在传扬开源的精神，在这种提倡勇于分享，共同合作的大形势下，自动化测试领域也涌现出大量优秀、先进的工具和框架。
单元测试和接口测试有力武器JUnit：
junit是在极限编程和重构（refactor）中被极力推荐使用的工具，因为在实现自动单元测试的情况下可以大大的提高开发的效率，但是实际上编写测试代码也是需要耗费很多的时间和精力的，但是使用这个工具好处到底在于：
开发过程
要求在编写代码之前先写测试，可以强制在写代码之前好好的思考代码（方法）的功能和逻辑，否则编写的代码很不稳定，那么需要同时维护测试代码和实际代码，这个工作量就会大大增加。因此在极限编程中，基本过程是这样的：构思－> 编写测试代码－> 编写代码－> 测试，而且编写测试和编写代码都是增量式的，写一点测一点，在编写以后的代码中如果发现问题可以较快的追踪到问题的原因，减小回归错误的纠错难度。
重构
其好处和开发过程中是类似的，因为重构也是要求改一点测一点，减少回归错误造成的时间消耗。
其他情况
我们在开发的时候使用junit写一些适当的测试也是有必要的，因为一般我们也是需要编写测试的代码的，可能原来不是使用的junit，如果使用junit，而且针对接口（方法）编写测试代码会减少以后的维护工作，例如以后对方法内部的修改（这个就是相当于重构的工作了）。另外就是因为junit有断言功能，如果测试结果不通过会告诉我们哪个测试不通过，为什么，而如果是像以前的一般做法是写一些测试代码看其输出结果，然后再由自己来判断结果是否正确，使用junit的好处就是这个结果是否正确的判断是它来完成的，我们只需要看看它告诉我们结果是否正确就可以了，在一般情况下会大大提高效率。
围绕JUnit框架产生的xUnit生态圈，涵盖了测试的方方面面，很多优秀的工具都可以应用到自动化测试中，来提高我们的测试效率。比如：JUnit、testNG、Mockito、easyMock、dbUnit等等很多优秀的工具。
Web自动化测试公认的标准Selenium WebDriver，由著名的Selenium协议和框架演变而来，Google公司大力支持的主流Web自动化测试框架。
Selenium 是web自动化测试工具集，包括IDE、Grid、RC（selenium 1.0）、WebDriver（selenium 2.0）等。
Selenium IDE 是firefox浏览器的一个插件。提供简单的脚本录制、编辑与回放功能。
Selenium Grid 是用来对测试脚步做分布式处理。现在已经集成到selenium server 中了。
RC和WebDriver 更多应该把它看成一套规范，在这套规范里定义客户端脚步与浏览器交互的协议。以及元素定位与操作的接口。
在Selenium优秀的框架基础之上衍生出来众多出色的Web自动化框架，比如：Watir
移动端自动化测试，两大主流平台都提供了非常优秀的测试工具iOS的UI Automation和Android的UI Automator。同时广大的开源爱好者也贡献了很多出色的移动端自动化测试工具，像Appium、Robotium、macaca等等。
其中Appium提出一种创新的思想。基于Selenium的思想，Appium实现了移动端自动化测试的跨平台。
Appium是一个移动端的自动化测试框架，可用于测试原生应用，移动网页应用和混合型应用，且是跨平台的。
Appium特点：
支持Native App、Hybird App、Web App；
支持Android、iOS、Firefox OS；
Server也是跨平台的，你可以使用Mac OS X、Windows或者Linux；
它的设计理念：Client/Server架构，运行的时候Server端会监听Client端发过来的命令，翻译这些命令发送给移动设备或模拟器，然后移动设备或模拟器做出响应的反应。正是因为这种架构，所以Client可以使用Appium client libraries多种语言的测试脚本，而且Server端完全可以部署在服务器上，甚至云服务器。Session，每个Client连接到Server以后都会有一个Session ID，而且Client发送命令到Server端都需要这个Session ID，因为这个seesion id代表了你所打开的浏览器或者是移动设备的模拟器。所以你甚至可以打开N个Session，同时测试不同的设备或模拟器。Desired Capabilities，其实就是一个键值对，设置一些测试的相关信息来告诉Server端，我们需要测试iOS、还是Android，或者换是WebApp等信息。Appium Server是Node.js写的，所以可以直接用NPM来进行安装。Appium Clients，Mac OS和Win下提供GUI，不需要装Node.js，方便测试人员操作。
国内整个行业的自动化测试起步较晚，各大公司都在积极探索和实现适合自身的自动化测试方案。百度作为互联网行业占据重要地位的大公司，在自动化测试方面已经取得可喜的成就，实现了大规模的自动化运维，自动化部署，云测试等自动化方面的巨大成就，在国内自动化领域起到带头作用。
### 研究结果与讨论
研究和借鉴国外优秀公司的经验，结合公司自身业务和项目特点，针对性的研发一套自动化测试平台。采用主流的自动化框架JUnit作为核心基础，结合持续集成平台Jenkins，版本控制平台GitLab以及移动端自动化测试框架Appium，整体构成一套统一、友好、易用的自动化测试平台。
满足不同项目的实现特点和加密方式，通过自主研发屏蔽不同项目间的差异，简化配置过程，脚本编写，真正达到简单易用的效果。
### 计划成果自评
基础相关性项目的成果非常明显，项目进展顺利，按计划完成。主要完成了以下部分内容：
（一）效果上：
1、功能性：通过严格的技术开发，完成了全部功能需求，满足并提供了测试人员在实际使用中的必需功能。
2、可靠性：在系统设计时，充分考虑系统的可靠性与稳定性，通过先进的技术保障，为测试人员提供可靠的服务。
3、易用性：通过优秀的界面和交互设计，为用户提供友好舒适的操作体验。
（二）组织实施：
研发人员全部来自本单位。
（三）具体分工为：
测试组（1人，负责设计产品功能需求，跟踪管理整体项目进度。）
测试组（1人，负责相关功能的开发及系统优化）
测试组（1人，负责对系统进行功能测试及上线评估）
测试组（1人，对产品所需服务器进行部署、配合上线）
（四）实施步骤：
    1、需求调研 2、项目立项 3、系统开发 4系统测试 5、正式发布。
（五）具体分别说明如下：
    * 2016-07-13~2016-07-28		对测试框架和测试项目进行分析，总结产品需求，调研国外国内成功的应用案例和技术产品
    * 2016-07-29~2016-09-01	 需求确认，启动开发
    确认迭代需求list，正式启动开发。
    * 2016-09-02~2016-09-16	 试运行与完善
    测试环境搭建，平台集成，线下功能测试。
    * 2016-09-17~2016-09-30		正式投入使用
    上线前使用文档整理，上线后运营维护。
### 国家技术成果情况
目前尚未获得国家级证书
